/*! (C) Copyright 2018 LanguageTooler GmbH. All rights reserved. */
function isElementNode(t){return t.nodeType===document.ELEMENT_NODE}function isTextNode(t){return t.nodeType===document.TEXT_NODE}function isInputArea(t){return"TEXTAREA"===t.tagName||t.isContentEditable}function isTextArea(t){return"TEXTAREA"===t.tagName}function isFirefox(){return navigator.userAgent.includes("Firefox/")}function isChrome(){return navigator.userAgent.includes("Chrome/")||navigator.userAgent.includes("Chromium/")}function isRealChrome(){return isChrome()&&!isOpera()&&!isYaBrowser()&&!isEdge()}function isUnsupportedFirefox(){const t=navigator.userAgent.match(/Firefox\/(\d+)/);return!!t&&parseInt(t[1])<60}function isOpera(){return navigator.userAgent.includes("OPR/")}function isEdge(){return navigator.userAgent.includes("Edg/")}function isYaBrowser(){return navigator.userAgent.includes("YaBrowser/")}function isUnsupportedChrome(){const t=navigator.userAgent.match(/Chrome\/(\d+)/);return!!t&&parseInt(t[1])<67}function getBrowserName(){return isFirefox()?"Firefox":isYaBrowser()?"Yandex":isEdge()?"Edge":isOpera()?"Opera":isChrome()?"Chrome":"Unknown Browser"}function getCurrentUrl(){if("about:blank"===location.href||"about:srcdoc"===location.href)try{return window.parent.location.href}catch(t){}return location.href}function getCurrentHostname(){const t=document.location||document.defaultView.location;if(t&&t.hostname)return t.hostname.replace(/^www./,"");try{return window.parent.location.hostname.replace(/^www./,"")}catch(t){}return""}function getMainPageHostname(){const t=window.parent!==window;let e;return document.referrer&&t&&(e=getHostNameFromUrl(document.referrer)),e||(e=getCurrentHostname()),e}function getHostNameFromUrl(t){try{const{hostname:e}=new URL(t);return e}catch(e){return t}}function wait(t=25,e=null){return new Promise(n=>setTimeout(()=>n(e),t))}function setAnimationFrameInterval(t,e){let n=null,r=!1;const o=()=>{n=setAnimationFrameTimeout(()=>{r||(t(),o())},e)};return o(),{destroy:()=>{r=!0,n&&(n.destroy(),n=null)}}}function setAnimationFrameTimeout(t,e){let n=null,r=!1;const o=window.setTimeout(()=>{r||(n=window.requestAnimationFrame(()=>t()))},e);return{destroy:()=>{r=!0,window.clearTimeout(o),n&&window.cancelAnimationFrame(n)}}}function dispatchCustomEvent(t,e={}){const n=new CustomEvent(t,{detail:e});document.dispatchEvent(n)}function contains(t,e){return t!==e&&t.contains(e)}function closestElement(t,e){return t.closest?t.closest(e):null}function isSameObject(t,e){return JSON.stringify(t)===JSON.stringify(e)}function isIntersect(t,e,n,r,o=!1){return o?t<=r&&e>=n:t<r&&e>n}function isRectsIntersect(t,e){return!(e.left>t.right||e.top>t.bottom||e.bottom<t.top)}function isPointInsideBox(t,e,n){return void 0===n&&(n=e.y,e=e.x),t.left<=e&&e<=t.right&&t.top<=n&&n<=t.bottom}function isSameRange(t,e){return t&&e&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endOffset===e.endOffset&&t.endContainer===e.endContainer}function isTinyMCE(t){return t.classList.contains("mce-content-body")||t.classList.contains("mceContentBody")}function isVisible(t){return(t.offsetWidth>0||t.offsetHeight>0)&&"hidden"!==new DomMeasurement(document).getStyle(t,"visibility")}function getBorderBoxes(t){return Array.from(t.getClientRects(),t=>({top:t.top,left:t.left,bottom:t.bottom,right:t.right,width:t.width,height:t.height}))}const getVisibleTopAndBottom=(()=>{const t=(t,e,n)=>{const r=document.elementFromPoint(e,n);return r&&(t===r||t.contains(r))};return(e,n,r,o)=>{const i=n.getPaddingBox(e,!1);if(i.bottom<0||i.top>r)return{top:0,bottom:i.height};let s=[];o&&(s=Array.from(e.ownerDocument.querySelectorAll(o))).forEach(t=>n.setStyles(t,{"pointer-events":"none !important"}));let a=i.left+Math.round(i.width/100*33);const c=Math.max(i.top,0);let u=c;for(;;){if(t(e,a,u)){if(u===c)break;for(;u--;)if(!t(e,a,u)){u++;break}break}if(u===i.bottom)break;u=Math.min(i.bottom,u+6)}const l=Math.min(i.bottom,r);let f=l;for(;;){if(t(e,a,f-1)){if(f===l)break;for(;f++<l;)if(!t(e,a,f-1)){f--;break}break}if(f===u)break;f=Math.max(u,f-6)}return s.forEach(t=>n.setStyles(t,{"pointer-events":"auto !important"})),{top:Math.round(Math.max(0,u-i.top)),bottom:Math.round(Math.max(0,f-i.top))}}})();function getRangeAtPoint(t){if(document.caretRangeFromPoint)return document.caretRangeFromPoint(t.x,t.y);if(document.caretPositionFromPoint){const e=document.caretPositionFromPoint(t.x,t.y);if(!e||!e.offsetNode)return null;try{const t=new Range;return t.setStart(e.offsetNode,e.offset),t.setEnd(e.offsetNode,e.offset),t}catch(t){return null}}return null}function observeScrollableAncestors(t,e){const n=new DomMeasurement(t.ownerDocument);const r=function(t){const e=[];let r=t.parentElement;for(;r&&r!==document.body&&r!==document.documentElement;){const t=n.getStyles(r,["overflow-x","overflow-y"]),o=t["overflow-x"],i=t["overflow-y"];"auto"!==i&&"scroll"!==i&&"auto"!==o&&"scroll"!==o||e.push(r),r=r.parentElement}return e}(t);let o=!1;const i=()=>{o||(o=!0,window.requestAnimationFrame(()=>{o=!1,e()}))};return r.forEach(t=>{t.addEventListener("scroll",i)}),{destroy(){r.forEach(t=>{t.removeEventListener("scroll",i)}),o=!0}}}const onElementDisabled=(()=>{let t;const e=[];return(n,r)=>{e.push({element:n,callback:r}),t=t||setInterval(()=>{const n=[];e.forEach(t=>{(t.element.readOnly||t.element.disabled||!isVisible(t.element))&&(n.push(t),t.callback(t.element))}),n.forEach(t=>{e.splice(e.indexOf(t),1)}),e.length||(clearInterval(t),t=null)},600)}})(),onElementRemoved=(()=>{let t;const e=[];return(n,r)=>{e.push({element:n,callback:r}),t||(t=new MutationObserver(n=>{const r=[];e.forEach(t=>{n.find(e=>Array.prototype.indexOf.call(e.removedNodes,t.element)>-1)&&(r.push(t),t.callback(t.element))}),r.forEach(t=>{e.splice(e.indexOf(t),1)}),e.length||(t.disconnect(),t=null)})).observe(document.documentElement,{childList:!0,subtree:!0})}})();function fadeOutAndRemove(t,e){let n=1;const r=new DomMeasurement(t.ownerDocument),o=setAnimationFrameInterval(()=>{if((n-=.08)<=0)return t.remove(),o.destroy(),void(e&&e());r.setStyles(t,{opacity:n+" !important"})},16)}function getSelectedText(){const t=document.activeElement,e=t?t.tagName.toLowerCase():null;return"textarea"===e||"input"===e&&/^(?:text|search|password|tel|url)$/i.test(t.type)&&"number"==typeof t.selectionStart?t.value.slice(t.selectionStart,t.selectionEnd):window.getSelection&&window.getSelection()?window.getSelection().toString():""}function getParagraphsDiff(t,e){const n=[],r=t.split("\n"),o=e.split("\n");let i=0;const s=Math.max(r.length,o.length);for(i=0;i<s&&r[i]===o[i];i++);let a=0;const c=Math.min(r.length,o.length);for(;i+a<c;){if(r[r.length-a-1]!==o[o.length-a-1])break;a++}let u=0;for(let t=0;t<i;t++)u+=r[t].length+1;let l=u;for(let t=i;t<s-a;t++){const e=t<r.length-a?r[t]:null,i=t<o.length-a?o[t]:null;e===i&&u===l||n.push({oldText:e,newText:i,textDiff:getTextsDiff(e||"",i||""),oldOffset:u,newOffset:l}),null!==e&&(u+=e.length+1),null!==i&&(l+=i.length+1)}if(u!==l)for(let t=a-1;t>=0;t--){const e=r[r.length-t-1],i=o[o.length-t-1];n.push({oldText:e,newText:i,textDiff:null,oldOffset:u,newOffset:l}),u+=e.length+1,l+=i.length+1}return n}function getTextsDiff(t,e){if(t===e)return null;let n=0;const r=Math.max(t.length,e.length);for(n=0;n<r&&t[n]===e[n];n++);let o=0;const i=Math.min(t.length,e.length);for(;n+o<i;){if(t[t.length-o-1]!==e[e.length-o-1])break;o++}return{from:n,oldFragment:t.substring(n,t.length-o),newFragment:e.substring(n,e.length-o)}}function bind(t,e,n){return{configurable:!0,get(){const t=n.value.bind(this);return Object.defineProperty(this,e,{value:t,configurable:!0,writable:!0}),t}}}function trackErrors(t,e,n){if(!isFirefox())return{configurable:!0,get(){const t=n.value,r=(...n)=>{try{return t.apply(null,n)}catch(t){let n=e;const r=generateStackTrace(t);throw r&&(n+="|"+r),window.event&&window.event.type&&(n+="|"+window.event.type),Tracker.trackError("js",t.message,n),t}};return Object.defineProperty(this,e,{value:r,configurable:!0,writable:!0}),r}}}function bindAndCatch(t,e=null){return function(){if(isFirefox())return t.apply(e,arguments);try{return t.apply(e,arguments)}catch(e){let n=t.name;const r=generateStackTrace(e);throw r&&(n+="|"+r),window.event&&window.event.type&&(n+="|"+window.event.type),Tracker.trackError("js",e.message,n),e}}}function generateStackTrace(t){if(!t.stack)return;let e=[];if(t.stack.split(/\n/).forEach(t=>{const n=t.match(/([\w_<>]+)\s+\(.+?([\w_\-]+\.(js|html))/);n&&e.push(`${n[2]}:${n[1]}`)}),!e.length){const n=t.stack.match(/([\w_\-]+\.(js|html))/);n&&e.push(n[1])}return e.join(",").substr(0,140)}function isRuntimeConnected(){try{return browser.runtime.getManifest(),!0}catch(t){return!1}}function getSubdomains(t){const e=[t];for(;t.split(".").length>2;){const n=t.indexOf(".");t=t.substr(n+1),e.push(t)}return e.reverse()}function uniq(t){const e=[];return t.forEach(t=>{-1===e.indexOf(t)&&e.push(t)}),e}function loadStylesheet(t){const e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=browser.runtime.getURL(t),(document.head||document.body).appendChild(e)}function loadHTML(t){const e=browser.runtime.getURL(t);return fetch(e).then(t=>t.text())}function asyncIterator(t,e,n,r=!1){if(r){let r;for(;r=t();)e(r);return void n()}let o=Date.now(),i=null,s=!1;const a=()=>{if(s)return;const r=t();r?(e(r),Date.now()-o>20?i=setTimeout(()=>{o=Date.now(),a()},400):a()):n()};return a(),{destroy(){s=!0,i&&clearTimeout(i)}}}function addUseCaptureEvent(t,e,n){const r=e=>{t.contains(e.target)&&n(e)};return window.addEventListener(e,r,!0),{destroy(){window.removeEventListener(e,r,!0)}}}const isProductionEnvironment=(()=>{let t;return()=>(void 0===t&&(t=isFirefox()?!browser.runtime.id.match("temporary-addon"):"update_url"in browser.runtime.getManifest()),t)})();